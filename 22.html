<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>結束語 | 再聊Go併發編程的價值和精進之路 - Go 併發編程實戰課</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Go 併發編程實戰課</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="結束語再聊go-併發程式設計的價值和精進之路"><a class="header" href="#結束語再聊go-併發程式設計的價值和精進之路">結束語｜再聊Go 併發程式設計的價值和精進之路</a></h1>
<p>你好，我是鳥窩。</p>
<h2 id="本章導讀"><a class="header" href="#本章導讀">本章導讀</a></h2>
<pre><code class="language-text">                  課程收尾與能力進階路徑

[學會 API] -&gt; [理解原理] -&gt; [避坑除錯] -&gt; [實務選型] -&gt; [組合新解法]
      |            |            |             |              |
    會寫        看得懂底層      知道風險        做對取捨         能處理複雜場景
</code></pre>
<p>很高興和你一起度過了一個多月的時間，到了和你說再見的時候了。</p>
<p>在過去的這些年裡，我一直在研究 Go 併發程式設計，時間越久，越覺得，掌握 Go 併發原語是一件很有意思的事情。</p>
<p>很多剛開始學習併發原語的同學給我留言說：“<strong>使用 Go 寫併發程式很容易啊，為啥要學這麼多併發原語呢？”</strong></p>
<p>如果你也有這樣的疑問，我的答案就是在這節課的封面圖中寫的那句話：“<strong>併發原語，初識時簡單，深交時複雜，熟識時又覺簡單。</strong>”這是我的真實體會。</p>
<p>如果你處於剛開始接觸併發原語的階段，你可能會覺得：“這挺好理解的呀，我一看就會了。”但是隨著學習的不斷深入，你會看到各種複雜的用法，各種潛在的坑，這些東西打破了初印象，你會陷入到“千頭萬緒”的境地。只要你不畏困難，持續學習，最後你就可以輕鬆地使用這些併發原語了。如果說最初的“簡單”是“初生牛犢不怕虎”的“簡單”，那麼“熟識”後的“簡單”，就是“撥雲見霧”的“簡單”。這也是，我在這門課裡想要帶你達到的狀態。</p>
<p>總之，<strong>使用 Go 寫併發程式很容易，使用 Go 寫好併發程式很不容易。</strong></p>
<p>遺憾的是，很多人都沒有意識併發程式設計的複雜性，甚至還沒有意識到，併發程式設計錯誤帶來的嚴重後果。所以，我想跟你分享關於併發程式設計 Bug 的兩個小故事。</p>
<p>第一個故事，是我剛剛看到的澳大利亞交易所（ASX）的新系統在上線後崩潰的故事。</p>
<p>11 月 16 日中午，ASX 釋出宣告說，當天將休市，會在次日的正常時間重新開放。官方給出的關閉原因是“侷限於單個交易指令中交易多種證券（組合交易）的軟體問題，導致了市場資料不準確。”</p>
<p>雖然我並沒有看到這個 Bug 的細節，但是，從官方提供的關閉原因中，我們可以簡單地推斷出是“單個指令中交易多種證券的問題”，大機率是一個併發問題的 Bug。雖然經過一天的排查和修復，第二天這個交易所就恢復上線了。但是，耽誤一天的時間，損失也是非常大的。</p>
<p>類似的軟體 Bug，尤其是併發問題的 Bug，即使經過很長時間的測試，也不一定能被觸發和發現。可是一旦出現，就可能是一個一級的 Bug。</p>
<p>如果看完這個故事，你還沒有意識到併發程式設計的複雜性和併發問題的危害，我再給你講一個故事。</p>
<p>1997 年 7 月，NASA 的 Mars Pathfinder（火星探路者）在降落火星表面後不久，就因併發軟體中的一個缺陷受到了威脅。這是在飛行前的測試中發現的，但因為它只發生在某些沒有預料到的過載條件下，所以被給予了較低的優先順序。</p>
<p>但是，飛船開始採集氣象資料的時候，它所使用的 vxWorks 作業系統就出現了問題，不斷地重啟。這是經典的優先順序反轉的併發 Bug。</p>
<p>幸好工程師上傳了一小段 C 語言程式給飛船，在執行的時候，將優先順序繼承的互斥標誌從 false 改成了 true，才成功地解決了這個 Bug。</p>
<p>這次人為的忽視，險些釀成慘劇。所以，學好併發程式設計，是我們的重要責任。</p>
<p>那麼，該怎麼在編寫 Go 程式時，避免併發程式設計的 Bug 呢？在開篇詞裡，我講到了“兩大主線”，現在學完了所有內容之後，你會發現，其實可以抽象成“三部曲”：</p>
<ol>
<li>全面地掌握 Go 併發程式設計的知識，不遺漏任何的知識點；</li>
<li>熟悉每一個併發原語的功能和實作，在面對併發場景時，能夠高效地選出最適合的併發原語；</li>
<li>多看看別人踩的坑，避免自己再掉進相同的坑裡。</li>
</ol>
<p>在前面的課程中，我講的所有內容，都是為了幫助你輕鬆地完成這三個目標。在課程的最後，我還想再給你多交代幾句。</p>
<p>學完這門課，並不代表你已經掌握了 Go 併發程式設計的知識。Go 併發程式設計的知識廣、內容深，現在你再回顧前面的知識，可能已經遺忘了一大半了。即使你現在記得很清楚，等過一段時間，再提到這些知識點，你也可能答不上來。</p>
<p>所以，學完這門課並不是一件一勞永逸的事情，你要在空閒的時候多複習下前面的內容。怎麼複習呢？你可能也注意到了，每講完一個併發原語，課程裡都有一張知識導圖，這些圖既可以幫助你梳理知識主線，也可以幫助你高效地複習。</p>
<p>你可以對照著圖中的核心要點，去回顧我們學習的重要內容，如果感覺有些地方比較陌生了，就及時回去複習下。另外，你也可以做一些摘錄，並且寫上你自己的收穫和思考。<strong>學習過不等於能輸出</strong>，你一定要記住這句話。</p>
<p>另外，這門課的核心是講 Go 併發原語的知識，並沒有涉及到 Go 併發模型和排程的事情。這不是說，我認為這部分內容不重要，而是很多大牛已經把這些內容寫得很清楚、很明白了。如果你對這方面的知識還不太熟悉，可以搜尋關鍵字“golang gpm schedule”，你會看到很多資料。你讀幾篇，就明白了。如果要推薦的話，我建議你重點讀一讀歐長坤的 《Go 語言原本》的 併發排程，這一篇的邏輯非常順暢，能看出非常多的經驗。</p>
<p>當然，我還想再給你推薦一些補充資料，如果你還有餘力，可以再擴充套件一下知識面。</p>
<p>首先是一本書，名字是“Concurrency in Go”。這是第一本全面介紹 Go 併發程式設計的圖書。書中介紹了併發程式設計的背景知識、常見的原語和併發模式。我印象最深的，就是書裡對 Channel 的介紹，比如 Channel 是粘合 goroutine 的膠水，而 select 是粘合 Channel 的膠水。這樣形象的說法，可以幫助你快速地學到精髓。</p>
<p>除此之外，Go 官方部落格列出的一些技術分享，比如Go Concurrency Patterns、Advanced Go Concurrency Patterns，都是不錯的閱讀材料，我建議你好好讀一讀。</p>
<p>好了，關於結課後的學習方法，我就說到這裡。在這節課的最後，我特別想再和你分享我自己的兩個心得。</p>
<p><strong>第一，開放的心態，可以拓展你的人生邊界。</strong></p>
<p>我始終認為，一個人衰老的標誌，不是指他的容貌經歷了太多歲月的刻畫，而是他的內心封閉了，不再接收新的知識、新的事物。</p>
<p>在一些技術交流會上，我聽到一些開發者說，Go 併發程式設計很簡單，有什麼可學的？遇到這種不是技術討論的話題，我一般只會說：“你說得對。”</p>
<p>我當然認同我們應該把核心精力用在眼下有價值的事情上，在自己擅長的領域裡深耕，但是我更相信，開放心會讓你的人生與眾不同。如果你碰見了新技術的發展，即使不需要深入地學習，也要儘量花時間去了解一下，也許這些新的東西，就是你人生的轉折點。</p>
<p>我之前就是一直使用 Java、Scala，後來才開始瞭解 Go，但是，很顯然，Go 給我的人生帶來了不一樣的東西。如果不是深入研究 Go，我就沒有機會開設這麼一門課了。</p>
<p><strong>第二，無數人想要你的注意力，但只有你能決定你把它放在哪裡。</strong></p>
<p>我們總說這個時代是資訊爆炸的時代，其實，資訊爆炸就意味著千萬的資訊傳送者想要佔用你的注意力。你一定要保持謹慎，不要毫無感知地把你的時間扔給無價值、無意義的資訊。</p>
<p>如果說上一條是讓你延伸注意力的觸角，那麼這一條，就是讓你收縮注意力的觸角，但這兩者並不矛盾，因為側重點不同。“延伸”還是“收縮”，取決於你自己想要擁有的人生的樣子，只有你能決定。我能做的，就是提醒你，要開放，也要謹慎。</p>
<p>雖然很捨不得，但還是要跟你說再見了。在課程的最後，我給你準備一份結課問卷，希望你花 1 分鐘時間，點選下面的圖片填寫一下。如果你的建議被採納，我將會給你贈送一個護腕墊或者價值 99 元的課程閱碼。期待你的暢所欲言。</p>
<p><a href="https://jinshuju.net/f/UQheYe"><img src="./images/a957c8c8e024257d82ff42327ef12e67.png" alt="" /></a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="21.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="21.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
